"use strict";exports.id=806,exports.ids=[806],exports.modules={1257:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732),e=c(928);function f({name:a}){return(0,d.jsx)(e.Typography,{gutterBottom:!0,variant:"h5",component:"div",children:a})}},2487:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732),e=c(928);function f({onChange:a,disabled:b,error:c,value:f,sx:g}){return(0,d.jsx)(e.TextField,{id:"price-per-unit-input",label:"Цена за шт.",name:"pricePerUnit",size:"small",required:!b,margin:"dense",type:"number",inputProps:{step:"any",min:0},disabled:b,onChange:a,error:c,value:f,sx:g})}},6726:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{g3:()=>i});var e=c(1428),f=c(7264),g=a([e,f]);async function h(a,b,c){try{let d=(await (0,f.J)({address:a,abi:c,functionName:"uri",args:[b]})).replace("{id}",b.toString()),{data:g}=await e.default.get(d);return{name:g.name||"Unknown",description:g.description||"No description",image:g.image||""}}catch(a){return console.error("Ошибка при получении метаданных:",a),{name:"Unknown",description:"Could not load metadata",image:""}}}function i(a,b){return async c=>{var d,e;let f=await h(a,c.tokenId,b);return d=c,e=f,{price:d.price?d.price.toString():void 0,tokenId:Number(d.tokenId),marketItemId:Number(d.marketItemId),seller:d.seller,owner:d.owner,sold:d.sold,canceled:d.canceled,image:e.image,name:e.name,description:e.description,balance:Number(d.balance||1)}}}[e,f]=g.then?(await g)():g,d()}catch(a){d(a)}})},13367:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732),e=c(928);function f({text:a,children:b}){return(0,d.jsx)(e.Container,{children:(0,d.jsxs)(e.Box,{sx:{display:"flex",justifyContent:"center",flexDirection:"column",textAlign:"center",flexShrink:1,p:1,m:1},children:[(0,d.jsx)(e.Typography,{variant:"body3",color:"text.secondary",children:a}),b]})})}},16095:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>n});var e=c(8732),f=c(90977),g=c(10656),h=c(68566),i=c(66360),j=a([f,g,h]);[f,g,h]=j.then?(await j)():j;let{publicClient:k,webSocketPublicClient:l}=(0,f.configureChains)([g.sepolia],[(0,f.publicProvider)()]),m=(0,f.createConfig)({autoConnect:!0,publicClient:k,webSocketPublicClient:l,connectors:[new f.MetaMaskConnector({chains:[g.sepolia]}),new h.F({chains:[g.sepolia],options:{projectId:process.env.NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID}})]}),n=function({Component:a,pageProps:b}){return(0,e.jsx)(f.WagmiProvider,{config:m,children:(0,e.jsx)(i.A,{children:(0,e.jsx)(a,{...b})})})};d()}catch(a){d(a)}})},16625:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732),e=c(928);function f({onChange:a,disabled:b,error:c,value:f,min:g=1,max:h,sx:i}){return(0,d.jsx)(e.TextField,{id:"quantity-input",label:"Цена за шт.",name:"quantity",size:"small",required:!b,margin:"dense",type:"number",inputProps:{min:g,max:h,step:1},disabled:b,onChange:a,error:c,value:f,sx:i})}},32533:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>l});var e=c(8732),f=c(56884),g=c(928),h=c(67566),i=c(62287),j=c(82015),k=a([f,i,h]);function l({addNFTToList:a}){let{register:b,handleSubmit:c,formState:{errors:d}}=(0,f.useForm)(),{nftContract:k}=(0,j.useContext)(i.bl),{data:l,isLoading:m,isError:n,write:o}=(0,h.useContractWrite)({address:k.address,abi:k.abi,functionName:"mint",onSuccess:a=>{console.log("Transaction hash:",a.hash)}});async function p(a){o?.({args:[a.tokenId,a.amount,a.metadataUrl]})}return(0,e.jsxs)("form",{onSubmit:c(p),children:[(0,e.jsx)(g.TextField,{label:"Token ID",...b("tokenId",{required:"Token ID is required"}),error:!!d.tokenId,helperText:d.tokenId?.message}),(0,e.jsx)(g.TextField,{label:"Amount",type:"number",...b("amount",{required:"Amount is required"}),error:!!d.amount,helperText:d.amount?.message}),(0,e.jsx)(g.TextField,{label:"Metadata URL",...b("metadataUrl",{required:"Metadata URL is required"}),error:!!d.metadataUrl,helperText:d.metadataUrl?.message}),(0,e.jsx)(g.Button,{type:"submit",disabled:!o||m,children:m?(0,e.jsx)(g.CircularProgress,{size:24}):"Mint NFT"})]})}[f,i,h]=k.then?(await k)():k,d()}catch(a){d(a)}})},42574:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(8732),e=c(928);function f({description:a}){return(0,d.jsx)(e.Typography,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:a})}},44519:(a,b,c)=>{c.d(b,{A:()=>i});var d=c(8732),e=c(928),f=c(56761),g=c.n(f),h=c(82015);function i({price:a,priceType:b="price",currencyIcon:c="/eth.png",currencySymbol:f="ETH"}){let i=function(a){switch(a){case"sold":return"Продано за";case"offered":return"Предлагалось за";case"unitPrice":return"Цена за шт.";case"totalPrice":return"Общая цена";case"lowestPrice":return"Мин. цена";default:return"Цена"}}(b),[j,k]=(0,h.useState)(null),l=()=>{k(null)};return(0,d.jsxs)("div",{style:{textAlign:"center"},children:[(0,d.jsx)(e.Typography,{variant:"h6",color:"text.secondary",children:i}),(0,d.jsxs)(e.Typography,{gutterBottom:!0,variant:"h6",color:"text.secondary",children:[(0,d.jsx)("span",{style:{display:"inline-block",transform:"translateY(3px)"},children:(0,d.jsx)(g(),{alt:"eth",src:c,width:"20px",height:"20px",onMouseEnter:a=>{k(a.currentTarget)},onMouseLeave:l})}),(0,d.jsx)(e.Popover,{id:"mouse-over-popover",sx:{pointerEvents:"none"},open:!!j,anchorEl:j,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:l,disableRestoreFocus:!0,children:(0,d.jsx)(e.Typography,{sx:{p:1},children:f})})," ",a]})]})}},46338:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>m});var e=c(8732),f=c(928),g=c(82015),h=c(85134),i=c(62287),j=c(13367),k=a([h,i]);async function l(a,b){let c,d={chainId:(c=a.chainId,"0x"+c.toString(16)),chainName:a.name,nativeCurrency:{name:a.nativeCurrency.name,symbol:a.nativeCurrency.symbol,decimals:a.nativeCurrency.decimals},rpcUrls:a.rpc,blockExplorerUrls:[a.explorers&&a.explorers.length>0&&a.explorers[0].url?a.explorers[0].url:a.infoURL]};window.ethereum.request({method:"wallet_addEthereumChain",params:[d,b]}).catch(a=>console.log(a))}function m(){let{account:a}=(0,g.useContext)(i.bl);return(0,e.jsx)(j.A,{text:"This blockchain is not supported.",children:(0,e.jsx)(f.Button,{variant:"outlined",color:"primary",onClick:()=>l(h.Bt.polygonMumbaiTestnet,a),sx:{maxWidth:600,margin:"auto",display:"flex",justifyContent:"center"},children:a?({Metamask:"Add/Change to Polygon Mumbai Testnet on Metamask",imToken:"Add/Change to Polygon Mumbai Testnet on imToken",Wallet:"Add/Change to Polygon Mumbai Testnet on Wallet"})[(0,h.sO)()]:"Connect wallet"})})}[h,i]=k.then?(await k)():k,d()}catch(a){d(a)}})},56834:(a,b,c)=>{c.d(b,{W:()=>d});function d(a){return a?a.slice(0,8):""}},59145:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>w});var e=c(8732),f=c(51511),g=c(928),h=c(86904),i=c(42574),j=c(44519),k=c(1257),l=c(16625),m=c(2487),n=c(82015),o=c(62287),p=c(90977),q=c(66360),r=c(56884),s=a([h,o,p,r]);[h,o,p,r]=s.then?(await s)():s;let t=(0,f.styled)(g.Card)(({theme:a})=>({flexDirection:"column",display:"flex",margin:"15px",flexGrow:1,maxWidth:345})),u=(0,f.styled)(g.CardMedia)({height:0,paddingTop:"56.25%",cursor:"pointer"}),v=(0,f.styled)(g.CardContent)({paddingBottom:"8px",display:"flex",flexDirection:"column",height:"100%"}),w=function({item:a,type:b,contractAddress:c,contractABI:d,listingFeeFunctionName:f="getListingFee"}){let{account:r}=(0,n.useContext)(o.bl),{setIsModalOpen:s,setModalNFT:w}=(0,n.useContext)(q.p),[x,y]=(0,n.useState)(1),[z,A]=(0,n.useState)(0),{config:B}=(0,p.usePrepareContractWrite)({address:c,abi:d,functionName:"buyToken",args:[a.tokenId,x],value:"erc20"===b?z:0}),{write:C,isLoading:D,isError:E}=(0,p.useContractWrite)(B),{config:F}=(0,p.usePrepareContractWrite)({address:c,abi:d,functionName:"listItem",args:[a.tokenId,z]}),{write:G,isLoading:H,isError:I}=(0,p.useContractWrite)(F),J=a=>y(a.target.value),K=a=>A(a.target.value);return(0,e.jsx)(t,{children:(0,e.jsxs)(v,{children:["erc20"===b?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(k.A,{name:a.name}),(0,e.jsxs)(g.Typography,{children:["Balance: ",a.balance]}),(0,e.jsx)(m.A,{value:z,onChange:K}),(0,e.jsx)(l.A,{value:x,onChange:J}),(0,e.jsx)(g.Button,{disabled:!C||D,onClick:()=>C?.(),children:D?"Buying...":"Buy"})]}):(0,e.jsxs)(e.Fragment,{children:[a.image&&(0,e.jsx)(u,{image:a.image,title:a.name}),(0,e.jsx)(k.A,{name:a.name}),(0,e.jsx)(i.A,{description:a.description}),(0,e.jsx)(j.A,{price:a.price}),(0,e.jsx)(m.A,{value:z,onChange:K}),(0,e.jsx)(l.A,{value:x,onChange:J}),(0,e.jsx)(g.Button,{disabled:!C||D,onClick:()=>C?.(),children:D?"Buying...":"Buy"}),r===a.owner&&(0,e.jsxs)(e.Fragment,{children:["Listing Fee: ","fee",(0,e.jsx)(g.Button,{disabled:!G||H,onClick:()=>G?.(),children:H?"Listing...":"List"})]}),E&&(0,e.jsx)(g.Typography,{color:"error",children:"Error buying token"}),I&&(0,e.jsx)(g.Typography,{color:"error",children:"Error listing token"})]}),(0,e.jsx)(h.A,{item:a,type:b})]})})};d()}catch(a){d(a)}})},62287:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{bl:()=>i}),c(8732);var e=c(82015),f=c(90977),g=c(10656);c(83033),c(76129),c(63797),c(63859);var h=a([f,g]);[f,g]=h.then?(await h)():h,g.sepolia.id,g.sepolia.id,process.env.MARKETPLACE_CONTRACT_ADDRESS_SEPOLIA,process.env.TestToken_ADDRESS_SEPOLIA,process.env.TEST_ERC20_CONTRACT_ADDRESS_SEPOLIA,process.env.BLACKLIST_CONTRACT_ADDRESS_SEPOLIA;let i=(0,e.createContext)();d()}catch(a){d(a)}})},63797:a=>{a.exports={}},63859:a=>{a.exports={}},66360:(a,b,c)=>{c.d(b,{A:()=>h,p:()=>g});var d=c(8732),e=c(82015);let f={modalNFT:void 0,isModalOpen:!1,setModalNFT:()=>{},setIsModalOpen:()=>{}},g=(0,e.createContext)(f);function h({children:a}){let[b,c]=(0,e.useState)(f.modalNFT),[h,i]=(0,e.useState)(f.isModalOpen);return(0,d.jsx)(g.Provider,{value:{modalNFT:b,isModalOpen:h,setModalNFT:c,setIsModalOpen:i},children:a})}},70455:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>l});var e=c(8732),f=c(56884),g=c(928),h=c(67566),i=c(62287),j=c(82015),k=a([f,i,h]);function l({addERC20ToList:a}){let{register:b,handleSubmit:c,formState:{errors:d}}=(0,f.useForm)(),{erc20FactoryContract:k}=(0,j.useContext)(i.bl),{data:l,isLoading:m,isError:n,write:o}=(0,h.useContractWrite)({address:k.address,abi:k.abi,functionName:"createToken",onSuccess:a=>{console.log("Transaction hash:",a.hash)}});async function p(a){o?.({args:[a.name,a.symbol,a.decimals,a.initialSupply]})}return(0,e.jsxs)("form",{onSubmit:c(p),children:[(0,e.jsx)(g.TextField,{label:"Token Name",...b("name",{required:"Name is required"}),error:!!d.name,helperText:d.name?.message}),(0,e.jsx)(g.TextField,{label:"Token Symbol",...b("symbol",{required:"Symbol is required"}),error:!!d.symbol,helperText:d.symbol?.message}),(0,e.jsx)(g.TextField,{label:"Decimals",type:"number",...b("decimals",{required:"Decimals is required"}),error:!!d.decimals,helperText:d.decimals?.message}),(0,e.jsx)(g.TextField,{label:"Initial Supply",type:"number",...b("initialSupply",{required:"Initial Supply is required"}),error:!!d.initialSupply,helperText:d.initialSupply?.message}),(0,e.jsx)(g.Button,{type:"submit",disabled:!o||m,children:m?(0,e.jsx)(g.CircularProgress,{size:24}):"Create ERC20"})]})}[f,i,h]=k.then?(await k)():k,d()}catch(a){d(a)}})},76129:a=>{a.exports={}},83033:a=>{a.exports={}},85134:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{Bt:()=>i,sO:()=>h});var e=c(90977),f=c(10656),g=a([e,f]);[e,f]=g.then?(await g)():g;let{chains:i,publicClient:j}=(0,e.configureChains)([f.sepolia],[(0,e.publicProvider)()]);function h(){return window?.ethereum?.isMetaMask?"MetaMask":"Wallet"}(0,e.createConfig)({chains:i,publicClient:j,connectors:[new e.MetaMaskConnector]}),d()}catch(a){d(a)}})},85811:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>v});var e=c(8732),f=c(76630),g=c.n(f),h=c(38081),i=c.n(h),j=c(11255),k=c.n(j),l=c(3983),m=c(21016),n=c(59145),o=c(32533),p=c(70455),q=c(62287),r=c(82015),s=c(6726),t=c(9733),u=a([n,o,p,q,s,t]);[n,o,p,q,s,t]=u.then?(await u)():u;let w=(0,m.makeStyles)(a=>({grid:{spacing:3,alignItems:"stretch"},gridItem:{display:"flex",transition:"all .3s",[a.breakpoints.down("sm")]:{margin:"0 20px"}}}));function v({items:a,setNfts:b,withCreateNFT:c,tokenType:d}){let f=w(),{account:h,marketplaceContract:j,nftContract:m}=(0,r.useContext)(q.bl);async function s(a){b(b=>[a,...b])}async function t(a){b(b=>[a,...b])}return(0,e.jsx)(g(),{dataLength:a.length,loader:(0,e.jsx)(k(),{}),children:(0,e.jsxs)(i(),{container:!0,className:f.grid,id:"grid",children:[c&&(0,e.jsx)(i(),{item:!0,xs:12,sm:6,md:3,className:f.gridItem,children:"nft"===d?(0,e.jsx)(o.A,{addNFTToList:s}):(0,e.jsx)(p.A,{addERC20ToList:t})}),a.map((a,b)=>(0,e.jsx)(l.default,{in:!0,children:(0,e.jsx)(i(),{item:!0,xs:12,sm:6,md:3,className:f.gridItem,children:(0,e.jsx)(n.A,{item:a,type:a.type})})},b))]})})}d()}catch(a){d(a)}})},86904:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>h});var e=c(8732),f=c(97573),g=a([f]);function h({item:a,type:b="nft"}){return(0,e.jsxs)(e.Fragment,{children:["nft"===b&&(0,e.jsxs)(e.Fragment,{children:[a.creator&&(0,e.jsx)(f.A,{title:"Creator",address:a.creator}),a.owner&&(0,e.jsx)(f.A,{title:"Owner",address:a.owner}),a.seller&&(0,e.jsx)(f.A,{title:"Seller",address:a.seller})]}),"erc1155"===b&&(0,e.jsxs)(e.Fragment,{children:[a.creator&&(0,e.jsx)(f.A,{title:"Creator",address:a.creator}),a.owners&&a.owners.slice(0,3).map((a,b)=>(0,e.jsx)(f.A,{title:`Owner ${b+1}`,address:a},b))]}),"erc20"===b&&a.contractAddress&&(0,e.jsx)(f.A,{title:"Contract",address:a.contractAddress})]})}f=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},91009:(a,b,c)=>{c.r(b),c.d(b,{default:()=>i});var d=c(8732);c(82015);var e=c(82341),f=c.n(e),g=c(32770);class h extends f(){static async getInitialProps(a){let b=new g.ServerStyleSheet,c=a.renderPage;try{a.renderPage=()=>c({enhanceApp:a=>c=>b.collectStyles((0,d.jsx)(a,{...c}))});let e=await f().getInitialProps(a);return{...e,styles:(0,d.jsxs)(d.Fragment,{children:[e.styles,b.getStyleElement()," "]})}}finally{b.seal()}}render(){return(0,d.jsxs)(e.Html,{lang:"en",children:[(0,d.jsx)(e.Head,{}),(0,d.jsxs)("body",{children:[(0,d.jsx)(e.Main,{}),(0,d.jsx)(e.NextScript,{})]})]})}}let i=h},97573:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>k});var e=c(8732),f=c(928),g=c(82015),h=c(56834),i=c(62287),j=a([i]);function k({title:a,address:b}){let{account:c}=(0,g.useContext)(i.bl);return(0,e.jsxs)(f.Typography,{variant:"body2",color:"text.secondary",children:[a,": ","0x0000000000000000000000000000000000000000"===b?"Marketplace":b===c?"You":(0,h.W)(b)]})}i=(j.then?(await j)():j)[0],d()}catch(a){d(a)}})}};