"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[863],{1815:(e,n,r)=>{r.d(n,{A:()=>B});var t=r(7876),i=r(5422),a=r(1316),s=r(5999),l=r(8505),o=r(3310),d=r(5268),c=r(595),u=r(3314),m=r(5389),x=r(5003),p=r(5513),h=r(4232),g=r(9281);function y(e){let{title:n,address:r}=e,{account:i}=(0,h.useContext)(g.bl);return(0,t.jsxs)(x.A,{variant:"body2",color:"text.secondary",children:[n,": ",function(e,n){return"0x0000000000000000000000000000000000000000"===e?"Marketplace":e===n?"You":e?e.slice(0,8):""}(r,i)]})}function b(e){let{item:n,type:r="nft"}=e;return(0,t.jsxs)(t.Fragment,{children:["nft"===r&&(0,t.jsxs)(t.Fragment,{children:[n.creator&&(0,t.jsx)(y,{title:"Creator",address:n.creator}),n.owner&&(0,t.jsx)(y,{title:"Owner",address:n.owner}),n.seller&&(0,t.jsx)(y,{title:"Seller",address:n.seller})]}),"erc1155"===r&&(0,t.jsxs)(t.Fragment,{children:[n.creator&&(0,t.jsx)(y,{title:"Creator",address:n.creator}),n.owners&&n.owners.slice(0,3).map((e,n)=>(0,t.jsx)(y,{title:"Owner ".concat(n+1),address:e},n))]}),"erc20"===r&&n.contractAddress&&(0,t.jsx)(y,{title:"Contract",address:n.contractAddress})]})}function j(e){let{description:n}=e;return(0,t.jsx)(x.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:n})}var A=r(6798),f=r(4587),v=r.n(f);function C(e){let{price:n,priceType:r="price",currencyIcon:i="/eth.png",currencySymbol:a="ETH"}=e,s=function(e){switch(e){case"sold":return"Продано за";case"offered":return"Предлагалось за";case"unitPrice":return"Цена за шт.";case"totalPrice":return"Общая цена";case"lowestPrice":return"Мин. цена";default:return"Цена"}}(r),[l,o]=(0,h.useState)(null),d=()=>{o(null)};return(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsx)(x.A,{variant:"h6",color:"text.secondary",children:s}),(0,t.jsxs)(x.A,{gutterBottom:!0,variant:"h6",color:"text.secondary",children:[(0,t.jsx)("span",{style:{display:"inline-block",transform:"translateY(3px)"},children:(0,t.jsx)(v(),{alt:"eth",src:i,width:"20px",height:"20px",onMouseEnter:e=>{o(e.currentTarget)},onMouseLeave:d})}),(0,t.jsx)(A.Ay,{id:"mouse-over-popover",sx:{pointerEvents:"none"},open:!!l,anchorEl:l,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:d,disableRestoreFocus:!0,children:(0,t.jsx)(x.A,{sx:{p:1},children:a})})," ",n]})]})}function k(e){let{name:n}=e;return(0,t.jsx)(x.A,{gutterBottom:!0,variant:"h5",component:"div",children:n})}var T=r(2793);function S(e){let{onChange:n,disabled:r,error:i,value:a,min:s=1,max:l,sx:o}=e;return(0,t.jsx)(T.A,{id:"quantity-input",label:"Цена за шт.",name:"quantity",size:"small",required:!r,margin:"dense",type:"number",inputProps:{min:s,max:l,step:1},disabled:r,onChange:n,error:i,value:a,sx:o})}function w(e){let{onChange:n,disabled:r,error:i,value:a,sx:s}=e;return(0,t.jsx)(T.A,{id:"price-per-unit-input",label:"Цена за шт.",name:"pricePerUnit",size:"small",required:!r,margin:"dense",type:"number",inputProps:{step:"any",min:0},disabled:r,onChange:n,error:i,value:a,sx:s})}var I=r(4553),E=r(7612),N=r(4579);let L=(0,d.Ay)(c.A)(e=>{let{theme:n}=e;return{flexDirection:"column",display:"flex",margin:"15px",flexGrow:1,maxWidth:345}}),q=(0,d.Ay)(u.A)({height:0,paddingTop:"56.25%",cursor:"pointer"}),M=(0,d.Ay)(m.A)({paddingBottom:"8px",display:"flex",flexDirection:"column",height:"100%"}),P=function(e){let{item:n,type:r,contractAddress:i,contractABI:a,listingFeeFunctionName:s="getListingFee"}=e,{account:l}=(0,h.useContext)(g.bl),{setIsModalOpen:o,setModalNFT:d}=(0,h.useContext)(N.p),[c,u]=(0,h.useState)(1),[m,y]=(0,h.useState)(0),{config:A}=(0,I.usePrepareContractWrite)({address:i,abi:a,functionName:"buyToken",args:[n.tokenId,c],value:"erc20"===r?m:0}),{write:f,isLoading:v,isError:T}=(0,E.x)(A),{config:P}=(0,I.usePrepareContractWrite)({address:i,abi:a,functionName:"listItem",args:[n.tokenId,m]}),{write:_,isLoading:D,isError:R}=(0,E.x)(P),U=e=>u(e.target.value),F=e=>y(e.target.value);return(0,t.jsx)(L,{children:(0,t.jsxs)(M,{children:["erc20"===r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k,{name:n.name}),(0,t.jsxs)(x.A,{children:["Balance: ",n.balance]}),(0,t.jsx)(w,{value:m,onChange:F}),(0,t.jsx)(S,{value:c,onChange:U}),(0,t.jsx)(p.A,{disabled:!f||v,onClick:()=>null==f?void 0:f(),children:v?"Buying...":"Buy"})]}):(0,t.jsxs)(t.Fragment,{children:[n.image&&(0,t.jsx)(q,{image:n.image,title:n.name}),(0,t.jsx)(k,{name:n.name}),(0,t.jsx)(j,{description:n.description}),(0,t.jsx)(C,{price:n.price}),(0,t.jsx)(w,{value:m,onChange:F}),(0,t.jsx)(S,{value:c,onChange:U}),(0,t.jsx)(p.A,{disabled:!f||v,onClick:()=>null==f?void 0:f(),children:v?"Buying...":"Buy"}),l===n.owner&&(0,t.jsxs)(t.Fragment,{children:["Listing Fee: ","fee",(0,t.jsx)(p.A,{disabled:!_||D,onClick:()=>null==_?void 0:_(),children:D?"Listing...":"List"})]}),T&&(0,t.jsx)(x.A,{color:"error",children:"Error buying token"}),R&&(0,t.jsx)(x.A,{color:"error",children:"Error listing token"})]}),(0,t.jsx)(b,{item:n,type:r})]})})};var _=r(8992),D=r(2147),R=r(4081);function U(e){var n,r,i;let{addNFTToList:a}=e,{register:s,handleSubmit:l,formState:{errors:o}}=(0,_.mN)(),{nftContract:d}=(0,h.useContext)(g.bl),{data:c,isLoading:u,isError:m,write:x}=(0,R.useContractWrite)({address:d.address,abi:d.abi,functionName:"mint",onSuccess:e=>{console.log("Transaction hash:",e.hash)}});async function y(e){null==x||x({args:[e.tokenId,e.amount,e.metadataUrl]})}return(0,t.jsxs)("form",{onSubmit:l(y),children:[(0,t.jsx)(T.A,{label:"Token ID",...s("tokenId",{required:"Token ID is required"}),error:!!o.tokenId,helperText:null==(n=o.tokenId)?void 0:n.message}),(0,t.jsx)(T.A,{label:"Amount",type:"number",...s("amount",{required:"Amount is required"}),error:!!o.amount,helperText:null==(r=o.amount)?void 0:r.message}),(0,t.jsx)(T.A,{label:"Metadata URL",...s("metadataUrl",{required:"Metadata URL is required"}),error:!!o.metadataUrl,helperText:null==(i=o.metadataUrl)?void 0:i.message}),(0,t.jsx)(p.A,{type:"submit",disabled:!x||u,children:u?(0,t.jsx)(D.A,{size:24}):"Mint NFT"})]})}function F(e){var n,r,i,a;let{addERC20ToList:s}=e,{register:l,handleSubmit:o,formState:{errors:d}}=(0,_.mN)(),{erc20FactoryContract:c}=(0,h.useContext)(g.bl),{data:u,isLoading:m,isError:x,write:y}=(0,R.useContractWrite)({address:c.address,abi:c.abi,functionName:"createToken",onSuccess:e=>{console.log("Transaction hash:",e.hash)}});async function b(e){null==y||y({args:[e.name,e.symbol,e.decimals,e.initialSupply]})}return(0,t.jsxs)("form",{onSubmit:o(b),children:[(0,t.jsx)(T.A,{label:"Token Name",...l("name",{required:"Name is required"}),error:!!d.name,helperText:null==(n=d.name)?void 0:n.message}),(0,t.jsx)(T.A,{label:"Token Symbol",...l("symbol",{required:"Symbol is required"}),error:!!d.symbol,helperText:null==(r=d.symbol)?void 0:r.message}),(0,t.jsx)(T.A,{label:"Decimals",type:"number",...l("decimals",{required:"Decimals is required"}),error:!!d.decimals,helperText:null==(i=d.decimals)?void 0:i.message}),(0,t.jsx)(T.A,{label:"Initial Supply",type:"number",...l("initialSupply",{required:"Initial Supply is required"}),error:!!d.initialSupply,helperText:null==(a=d.initialSupply)?void 0:a.message}),(0,t.jsx)(p.A,{type:"submit",disabled:!y||m,children:m?(0,t.jsx)(D.A,{size:24}):"Create ERC20"})]})}r(8497);let O=(0,o.A)(e=>({grid:{spacing:3,alignItems:"stretch"},gridItem:{display:"flex",transition:"all .3s",[e.breakpoints.down("sm")]:{margin:"0 20px"}}}));function B(e){let{items:n,setNfts:r,withCreateNFT:o,tokenType:d}=e,c=O(),{account:u,marketplaceContract:m,nftContract:x}=(0,h.useContext)(g.bl);async function p(e){r(n=>[e,...n])}async function y(e){r(n=>[e,...n])}return(0,t.jsx)(i.A,{dataLength:n.length,loader:(0,t.jsx)(s.A,{}),children:(0,t.jsxs)(a.Ay,{container:!0,className:c.grid,id:"grid",children:[o&&(0,t.jsx)(a.Ay,{item:!0,xs:12,sm:6,md:3,className:c.gridItem,children:"nft"===d?(0,t.jsx)(U,{addNFTToList:p}):(0,t.jsx)(F,{addERC20ToList:y})}),n.map((e,n)=>(0,t.jsx)(l.A,{in:!0,children:(0,t.jsx)(a.Ay,{item:!0,xs:12,sm:6,md:3,className:c.gridItem,children:(0,t.jsx)(P,{item:e,type:e.type})})},n))]})})}},3846:(e,n,r)=>{r.d(n,{A:()=>l});var t=r(7876),i=r(4951),a=r(5751),s=r(5003);function l(e){let{text:n,children:r}=e;return(0,t.jsx)(i.A,{children:(0,t.jsxs)(a.A,{sx:{display:"flex",justifyContent:"center",flexDirection:"column",textAlign:"center",flexShrink:1,p:1,m:1},children:[(0,t.jsx)(s.A,{variant:"body3",color:"text.secondary",children:n}),r]})})}},6934:(e,n,r)=>{r.d(n,{A:()=>p});var t=r(7876),i=r(5513),a=r(4232),s=r(4553),l=r(9727),o=r(1558);let{chains:d,publicClient:c}=(0,s.configureChains)([o.G],[(0,s.publicProvider)()]);(0,l.Z)({chains:d,publicClient:c,connectors:[new s.MetaMaskConnector]});var u=r(9281),m=r(3846);async function x(e,n){let r={chainId:"0x"+e.chainId.toString(16),chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,symbol:e.nativeCurrency.symbol,decimals:e.nativeCurrency.decimals},rpcUrls:e.rpc,blockExplorerUrls:[e.explorers&&e.explorers.length>0&&e.explorers[0].url?e.explorers[0].url:e.infoURL]};window.ethereum.request({method:"wallet_addEthereumChain",params:[r,n]}).catch(e=>console.log(e))}function p(){var e,n;let{account:r}=(0,a.useContext)(u.bl);return(0,t.jsx)(m.A,{text:"This blockchain is not supported.",children:(0,t.jsx)(i.A,{variant:"outlined",color:"primary",onClick:()=>x(d.polygonMumbaiTestnet,r),sx:{maxWidth:600,margin:"auto",display:"flex",justifyContent:"center"},children:r?({Metamask:"Add/Change to Polygon Mumbai Testnet on Metamask",imToken:"Add/Change to Polygon Mumbai Testnet on imToken",Wallet:"Add/Change to Polygon Mumbai Testnet on Wallet"})[(null==(n=window)||null==(e=n.ethereum)?void 0:e.isMetaMask)?"MetaMask":"Wallet"]:"Connect wallet"})})}},8497:(e,n,r)=>{r.d(n,{g3:()=>s});var t=r(1040),i=r(8421);async function a(e,n,r){try{let a=(await (0,i.J)({address:e,abi:r,functionName:"uri",args:[n]})).replace("{id}",n.toString()),{data:s}=await t.A.get(a);return{name:s.name||"Unknown",description:s.description||"No description",image:s.image||""}}catch(e){return console.error("Ошибка при получении метаданных:",e),{name:"Unknown",description:"Could not load metadata",image:""}}}function s(e,n){return async r=>{var t,i;let s=await a(e,r.tokenId,n);return t=r,i=s,{price:t.price?t.price.toString():void 0,tokenId:Number(t.tokenId),marketItemId:Number(t.marketItemId),seller:t.seller,owner:t.owner,sold:t.sold,canceled:t.canceled,image:i.image,name:i.name,description:i.description,balance:Number(t.balance||1)}}}},9281:(e,n,r)=>{r.d(n,{bl:()=>s}),r(7876);var t=r(4232),i=r(1558),a=r(9742);i.G.id,i.G.id,a.env.MARKETPLACE_CONTRACT_ADDRESS_SEPOLIA,a.env.TestToken_ADDRESS_SEPOLIA,a.env.TEST_ERC20_CONTRACT_ADDRESS_SEPOLIA,a.env.BLACKLIST_CONTRACT_ADDRESS_SEPOLIA;let s=(0,t.createContext)()}}]);